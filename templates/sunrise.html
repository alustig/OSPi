$def with(m_vals)

$var title: OpenSprinkler Pi Sunrise Sunset Plugin
$var page: plugins
$code:
    snames = gv.snames

<script>
    // Initialize behaviors
    jQuery(document).ready(function(){

        jQuery("#cSubmit").click(function() {
            var srs = jQuery("#srs").html();
            var sre = jQuery("#sre").html();
            var sss = jQuery("#sss").html();
            var sse = jQuery("#sse").html();

            if (!jQuery.isNumeric(srs) || Math.floor(srs) != srs || parseInt(srs) > 120) {
                alert("Please enter an integer value less than 120 for sunrise start time.");
                return false;
            }

            if (!jQuery.isNumeric(sre) || Math.floor(sre) != sre || parseInt(sre) > 120) {
                alert("Please enter an integer value less than 120 for sunrise end time.");
                return false;
            }

            if (!jQuery.isNumeric(sss) || Math.floor(sss) != sss || parseInt(sss) > 120) {
                alert("Please enter an integer value less than 120 for sunset start time.");
                return false;
            }

            var reg = /([0-1]?[0-9]|2[0-4]):([0-5][0-9])(:[0-5][0-9])?/;
            if (reg.test(sse)) {
                alert("Please enter a value in the proper format (hh:mm) for sunset start time.");
                return false;
            }

            jQuery("#pluginForm").submit();
        });
        jQuery("button#cCancel").click(function(){
            window.location="/";
        });

    });
</script>

<div id="plugin">
    <div class="title">Sunrise &amp; Sunset</div>
    <p>Fill out the info below to create and daily adjust a program based on your location</p>
    <form id="pluginForm" action="/uss" method="get">
        <div style="float: left; width: 450px; margin-right: 10px;">
            Enable this plugin: <input name='auto_ss' type='checkbox'${" checked" if m_vals['auto_ss'] == "on" else ""}> 
            <table class="optionList">
                <tr>
                    <td style='text-transform: none; text-align: right;'>Zip Code:</td>
                    <td><input type="text" name="zip" value=$m_vals["zip"]></td>
                </tr>
                <tr>
                    <td style='text-transform: none; text-align: right;'>Station:</td>
                    <td>
                        <select name="station">
                            $for bid in range(0,gv.sd['nbrd']):
                                $for s in range(0,8):
                                    $ sid = bid*8 + s;
                                    $if gv.sd['show'][bid]&(1<<s):
                                        <option value="${sid}" ${"selected=selected" if int(m_vals['station']) == sid else ""} name="s${sid}" id="n${sid}">${snames[sid]}</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td style='text-transform: none; text-align: right;'>Start time before sunrise (mins):</td>
                    <td><input type="text" name="srs" id="srs" value=$m_vals["srs"]></td>
                </tr>
                <tr>
                    <td style='text-transform: none; text-align: right;'>End time after sunrise (mins):</td>
                    <td><input type="text" name="sre" id="sre" value=$m_vals["sre"]></td>
                </tr>
                <tr>
                    <td style='text-transform: none; text-align: right;'>Start time before sunset (mins):</td>
                    <td><input type="text" name="sss" id="sss" value=$m_vals["sss"]></td>
                </tr>
                <tr>
                    <td style='text-transform: none; text-align: right;'>End time 24H (hh:mm):</td>
                    <td><input type="text" name="sse" id="sse" value=$m_vals["sse"]></td>
                </tr>
            </table>
        </div>

        <div>
            <br/>
            <span style="font-weight: bold;">$m_vals['loc']</span>:<br/>
            Next sunrise will be at: <span style="font-weight: bold;">$m_vals['sunrise']</span><br/>
            Next sunset will be at: <span style="font-weight: bold;">$m_vals['sunset']</span><br/>
        </div>

        <br/>
        ${gv.pd}
        <div style="clear: both;"></div>
        
    </form>
</div>
<div id="controls">
    <button id="cSubmit" class="submit"><b>Submit</b></button>
    <button id="cCancel" class="cancel danger">Cancel</button>
</div>